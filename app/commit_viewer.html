<!--
This file contains a wrapper to search for a commit's summary view. Most of
the important functions are contained in commit_view.html
-->

<html>
<head>
<title> Commit Viewer </title>
<link rel="stylesheet" type="text/css" href="/css/main.css"/>
<link rel="stylesheet" type="text/css" href="/css/commit.css"/>

<script type="text/javascript" src="/js/jstree/_lib/jquery.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">

// We load this here as well as in commit_view.html to avoid errors
google.load('visualization', '1.0', {'packages':['corechart', 'table']});


function searchcommits(form){
  var commitid = form.query.value;

  // We send a request to the backend to see if it is a valid commit
  var url = "/commit_viewer/" + commitid;
  $.ajax({
    type: "GET",
    url: url,
    success: function(response){
      $('#searchResults').html(response);
      //$("#accordion").accordion({collapsible: true});
      form.query.value = '';
    },
    error: function(xhr, ajaxOptions, thrownError) {
      $("#searchResults").html("Not a valid commit. Try again");
      form.query.value = '';
    },
  });

}
</script>

</head>
<body>

<div id="search">
<div id="searchCommand" style="float:left">Please enter a commit to display:</div>
<form name="myform" action="" style="float:left">
<input type='text' name='query' />
<input type='button' id="submitButton" value="Search" onClick="javascript: searchcommits(this.form)">
</form>
</div>
<div class="clear"></div>

<div id="searchResults">
</div>

</body>
</html>
